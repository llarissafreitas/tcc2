<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Vagas Disponíveis</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<main>
    <h1>Vagas Disponíveis</h1>
    <div id="vaga-lista"></div>
</main>

<script>
    async function obterVagas() {
        try {
            const response = await fetch("http://localhost:8081/vagas/listar-sem-paginacao");
            const vagas = await response.json();

            const container = document.getElementById("vaga-lista");
            container.innerHTML = "";

            if (!vagas.length) {
                container.innerHTML = "<p>Nenhuma vaga disponível.</p>";
                return;
            }

            vagas.forEach(vaga => {
                const card = document.createElement("div");
                card.classList.add("vaga-card");
                card.innerHTML = `
                    <h3>${vaga.titulo}</h3>
                    <p><strong>Descrição:</strong> ${vaga.descricao}</p>
                    <p><strong>Local:</strong> ${vaga.localizacao || "Não informado"}</p>
                    <p><strong>Salário:</strong> R$ ${vaga.salario?.toFixed(2) || "0.00"}</p>
                    <p><strong>Empresa:</strong> ${vaga.empregador?.nome || "Desconhecida"}</p>
                `;
                container.appendChild(card);
            });
        } catch (err) {
            console.error("Erro ao buscar vagas:", err);
        }
    }

    window.onload = obterVagas;
</script>
</body>
</html>
